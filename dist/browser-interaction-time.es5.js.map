{"version":3,"file":"browser-interaction-time.es5.js","sources":["../src/browser-interaction-time.ts"],"sourcesContent":["interface BaseTimeEllapsedCallbackData {\n  callback: (timeInMs: number, active: boolean) => void\n  timeInMilliseconds: number\n}\n\ninterface RemoteCallBackData {\n  method?: string,\n  customUrl?: string,\n  data?: any\n}\n\ninterface RemoteServiceData {\n  data: { service?: string, id?: number },\n  response: { active: string, idle: string },\n  customUrl?: string\n}\ninterface RemoteTimeCallbackData {\n  callbackData?: {},\n  timeInMilliseconds: number,\n  timeout: number\n}\n\ntype BasicCallback = (timeInMs: number, active: boolean) => void\n\nexport interface TimeIntervalEllapsedCallbackData\n  extends BaseTimeEllapsedCallbackData {\n  multiplier: (time: number) => number\n}\n\nexport interface TimeIntervalRemoteCallback\n  extends RemoteTimeCallbackData {\n  multiplier: (time: number) => number\n}\n\nexport interface AbsoluteTimeEllapsedCallbackData\n  extends BaseTimeEllapsedCallbackData {\n  pending: boolean\n}\n\ninterface Settings {\n  timeIntervalEllapsedCallbacks?: TimeIntervalEllapsedCallbackData[],\n  timeIntervalRemoteCallback?: TimeIntervalRemoteCallback[],\n  absoluteTimeEllapsedCallbacks?: AbsoluteTimeEllapsedCallbackData[],\n  browserTabInactiveCallbacks?: BasicCallback[],\n  browserTabActiveCallbacks?: BasicCallback[],\n  idleTimeoutMs?: number,\n  checkCallbacksIntervalMs?: number,\n  times?: [],\n  timesIdle?: [],\n  localKey?: string,\n  sourceUrl?: string,\n  targetUrl?: string,\n  service?: RemoteServiceData\n}\ninterface Times {\n  start: number\n  stop: number | null\n}\n\ninterface Mark {\n  time: number\n}\n\ninterface Marks {\n  [key: string]: Mark[]\n}\n\ninterface Measure {\n  name: string\n  startTime: number\n  duration: number\n}\n\ninterface Measures {\n  [key: string]: Measure[]\n}\nconst windowIdleEvents = ['scroll', 'resize']\nconst documentIdleEvents = [\n  'wheel',\n  'keydown',\n  'keyup',\n  'mousedown',\n  'mousemove',\n  'touchstart',\n  'touchmove',\n  'click',\n  'contextmenu'\n]\n\nexport default class BrowserInteractionTime {\n  private running: boolean;\n  private times: Times[];\n  private timesIdle: Times[];\n  private idle: boolean;\n  private checkCallbackIntervalId?: number;\n  private currentIdleTimeMs: number;\n\n  private idleTimeoutMs: number;\n  private remoteTimeout: number;\n  private checkCallbacksIntervalMs: number;\n  private browserTabActiveCallbacks: BasicCallback[];\n  private browserTabInactiveCallbacks: BasicCallback[];\n  private timeIntervalEllapsedCallbacks: TimeIntervalEllapsedCallbackData[];\n  private timeIntervalRemoteCallback: TimeIntervalRemoteCallback[];\n  private absoluteTimeEllapsedCallbacks: AbsoluteTimeEllapsedCallbackData[];\n  private marks: Marks;\n  private measures: Measures;\n  private localKey: string;\n  private guidKey: string;\n  private guid: string;\n  private sourceUrl: string | boolean;\n  private targetUrl: string | boolean;\n  private serviceData: RemoteServiceData | boolean;\n\n  constructor({\n    timeIntervalEllapsedCallbacks,\n    timeIntervalRemoteCallback,\n    absoluteTimeEllapsedCallbacks,\n    checkCallbacksIntervalMs,\n    browserTabInactiveCallbacks,\n    browserTabActiveCallbacks,\n    times,\n    timesIdle,\n    localKey,\n    idleTimeoutMs,\n    sourceUrl,\n    targetUrl,\n    service,\n  }: Settings) {\n    this.running = false;\n    this.times = times || [];\n    this.timesIdle = timesIdle || [];\n    this.idle = false;\n    this.currentIdleTimeMs = 0;\n    this.marks = {};\n    this.measures = {};\n    this.browserTabActiveCallbacks = browserTabActiveCallbacks || [];\n    this.browserTabInactiveCallbacks = browserTabInactiveCallbacks || [];\n    this.checkCallbacksIntervalMs = checkCallbacksIntervalMs || 100;\n    this.idleTimeoutMs = idleTimeoutMs || 3000 // 3s;\n    this.remoteTimeout = 0;\n    this.timeIntervalEllapsedCallbacks = timeIntervalEllapsedCallbacks || [];\n    this.timeIntervalRemoteCallback = timeIntervalRemoteCallback || [];\n    this.absoluteTimeEllapsedCallbacks = absoluteTimeEllapsedCallbacks || [];\n    this.localKey = localKey || 'XXXX';\n    this.guidKey = 'browserTabGuid-' + this.localKey;\n    this.guid = this.generateGuid();\n    this.sourceUrl = sourceUrl || false;\n    this.targetUrl = targetUrl || false;\n    this.serviceData = service || false;\n    console.log(this.serviceData);\n\n    this.registerEventListeners();\n    this.setCurrentGuid();\n  }\n\n  private initTimers = async () => {\n    let activeTime = BrowserInteractionTime.getActiveTime(this.localKey);\n    let idleTime = BrowserInteractionTime.getIdleTime(this.localKey);\n    let responseActiveTime = 0;\n    let responseIdleTime = 0;\n    if (!this.serviceData) {\n      console.error('You cannot use function remoteCallBack() without declare service at BrowserInteractionTime constructor\\'s');\n    } else {\n      let extraData = typeof (<RemoteServiceData>this.serviceData).customUrl === 'string' ? { customUrl: (<RemoteServiceData>this.serviceData).customUrl } : {}\n      await this.remoteCallback({ method: 'GET', ...extraData })\n        .then((res: any) => {\n          let responseData = res.data;\n          if (responseData) {\n            if (responseData.hasOwnProperty((<RemoteServiceData>this.serviceData).response.active)) {\n              responseActiveTime = responseData[(<RemoteServiceData>this.serviceData).response.active];\n            }\n            if (responseData.hasOwnProperty((<RemoteServiceData>this.serviceData).response.idle)) {\n              responseIdleTime = responseData[(<RemoteServiceData>this.serviceData).response.idle];\n            }\n\n            let finalActiveTime = activeTime > this.getTimeInMilliseconds() ? (activeTime > responseActiveTime ? activeTime : responseActiveTime) : (this.getTimeInMilliseconds() > responseActiveTime ? this.getTimeInMilliseconds() : responseActiveTime);\n            this.times = BrowserInteractionTime.initTimer(finalActiveTime);\n            this.storageTimesObject(this.localKey, this.times, true);\n            let finalIdleTime = idleTime > this.getIdleTimeInMilliseconds() ? (idleTime > responseIdleTime ? idleTime : responseIdleTime) : (this.getIdleTimeInMilliseconds() > responseIdleTime ? this.getIdleTimeInMilliseconds() : responseIdleTime);\n            this.timesIdle = BrowserInteractionTime.initTimer(finalIdleTime);\n            this.storageTimesObject(this.localKey, this.timesIdle, false);\n          } else {\n\n          }\n        })\n    }\n  }\n\n  private generateGuid = () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n      /*eslint-disable*/\n      let r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : (r & 0x3 | 0x8);\n      /*eslint-enable*/\n      return v.toString(16);\n    });\n  }\n\n  private onBrowserTabInactive = (event: Event) => {\n    // if running pause timer\n    if (this.isRunning()) {\n      this.stopTimer();\n    }\n\n    this.browserTabInactiveCallbacks.forEach(fn =>\n      fn(this.getTimeInMillisecondsOf(BrowserInteractionTime.getIdleTimesObject(this.localKey)), false)\n    )\n  }\n\n  private onBrowserTabActive = (event: Event) => {\n    setTimeout(() => {\n      // if not running start timer\n      if (!this.isRunning()) {\n        this.running = true\n        if (this.getCurrentGuid() !== this.guid) {\n          this.setCurrentGuid();\n          this.timesIdle = BrowserInteractionTime.getIdleTimesObject(this.localKey, (times: any) => JSON.parse(times));\n          this.timesIdle[this.timesIdle.length - 1].stop = this.timesIdle[this.timesIdle.length - 1].start;\n          this.stopTimer(false);\n        }\n        this.startTimer();\n      } else if (this.isRunning() && this.guid !== this.getCurrentGuid()) {\n        this.setCurrentGuid();\n        this.timesIdle = BrowserInteractionTime.getIdleTimesObject(this.localKey, (times: any) => JSON.parse(times));\n        this.startTimer();\n      }\n\n      this.browserTabActiveCallbacks.forEach(fn => {\n        fn(this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey)), true)\n      }\n      )\n    }, 100);\n  }\n\n  private onTimePassed = () => {\n    let timesActiveStoraged = BrowserInteractionTime.getActiveTimesObject(this.localKey);\n    let timesIdleStoraged = BrowserInteractionTime.getIdleTimesObject(this.localKey);\n\n    if (timesActiveStoraged == null) {\n      this.storageTimesObject(this.localKey, this.times, true);\n    }\n\n    if (timesIdleStoraged == null) {\n      this.storageTimesObject(this.localKey, this.timesIdle, false);\n    }\n\n    if (this.guid !== this.getCurrentGuid()) {\n      this.times = BrowserInteractionTime.getActiveTimesObject(this.localKey, (time: string) => JSON.parse(time));\n      this.timesIdle = BrowserInteractionTime.getIdleTimesObject(this.localKey, (timeIdle: string) => JSON.parse(timeIdle));\n    }\n    // check all callbacks time and if passed execute callback\n    if (this.getCurrentGuid() == this.guid) {\n      this.absoluteTimeEllapsedCallbacks.forEach(\n        ({ callback, pending, timeInMilliseconds }, index) => {\n          if (pending && timeInMilliseconds <= this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey))) {\n            if (!this.running) {\n              callback(this.getTimeInMillisecondsOf(BrowserInteractionTime.getIdleTimesObject(this.localKey)), false);\n            } else {\n              callback(this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey)), true);\n            }\n            this.absoluteTimeEllapsedCallbacks[index].pending = false\n          }\n        }\n      )\n\n      this.timeIntervalEllapsedCallbacks.forEach(\n        ({ callback, timeInMilliseconds, multiplier }, index) => {\n          if (timeInMilliseconds <= this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey))) {\n            if (!this.running) {\n              callback(this.getTimeInMillisecondsOf(BrowserInteractionTime.getIdleTimesObject(this.localKey)), false);\n            } else if (this.running && !this.idle) {\n              callback(this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey)), true);\n            }\n            this.timeIntervalEllapsedCallbacks[\n              index\n            ].timeInMilliseconds = multiplier(timeInMilliseconds)\n          }\n        }\n      )\n\n      this.timeIntervalRemoteCallback.forEach(\n        ({ callbackData, timeInMilliseconds, multiplier, timeout }, index) => {\n          if (timeInMilliseconds >= timeout) {\n            if (!this.serviceData) {\n              console.error('You cannot use function remoteCallBack() without declare service at BrowserInteractionTime constructor\\'s');\n              this.timeIntervalRemoteCallback[index].timeout = Infinity; // Set timeout to Infinity to stop fetchService\n            } else {\n              this.remoteCallback(<RemoteCallBackData>callbackData);\n              this.timeIntervalRemoteCallback[index].timeInMilliseconds = 0;\n            }\n          } else {\n            this.timeIntervalRemoteCallback[index].timeInMilliseconds = multiplier(timeInMilliseconds);\n          }\n\n        }\n      )\n\n      if (this.currentIdleTimeMs >= this.idleTimeoutMs && this.isRunning()) {\n        this.idle = true;\n        this.stopTimer();\n      } else {\n        this.currentIdleTimeMs += this.checkCallbacksIntervalMs;\n      }\n    }\n  }\n\n  private remoteCallback = (data: RemoteCallBackData) => {\n    console.log(data);\n    return new Promise((resolve, reject) => {\n      let hasCustomUrl: boolean = data.hasOwnProperty('customUrl') && ['undefined', 'boolean'].indexOf(typeof data.customUrl) === -1;\n      let method: string = data.hasOwnProperty('method') ? <string>data.method : 'GET';\n      let timesObject = {\n        timeActive: this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey)),\n        timeIdle: this.getTimeInMillisecondsOf(BrowserInteractionTime.getIdleTimesObject(this.localKey))\n      };\n      let dataToSend: any = { ...(<RemoteServiceData>this.serviceData).data, ...timesObject };\n      if (data.hasOwnProperty('data')) {\n        dataToSend = { ...dataToSend, ...data.data };\n      }\n      if (hasCustomUrl || this.targetUrl || this.sourceUrl) {\n        let request: RequestInit = {\n          method: method\n        };\n        let url = hasCustomUrl ? <string>data.customUrl : (method == 'GET' && this.sourceUrl ? <string>this.sourceUrl : <string>this.targetUrl);\n        if (method === 'GET') {\n          let params = url.indexOf('?') !== -1 ? '&' : '?';\n          Object.keys(dataToSend).forEach(dataKey => {\n            params += dataKey + '=' + dataToSend[dataKey] + '&';\n          });\n          url += params.slice(0, params.length - 1);\n        } else {\n          request.body = JSON.stringify(dataToSend);\n        }\n\n        fetch(url, request)\n          .then(res => resolve(res.json()));\n      } else {\n        resolve(false);\n      }\n    });\n  }\n\n  private resetIdleTime = () => {\n    if (this.idle) {\n      this.startTimer()\n    }\n    this.idle = false\n    this.currentIdleTimeMs = 0\n  }\n\n  private registerEventListeners = () => {\n    const documentListenerOptions = { passive: true }\n    const windowListenerOptions = { ...documentListenerOptions, capture: true }\n\n    window.addEventListener(\n      'blur',\n      this.onBrowserTabInactive,\n      windowListenerOptions\n    )\n    window.addEventListener(\n      'focusout',\n      this.onBrowserTabInactive,\n      windowListenerOptions\n    )\n    window.addEventListener(\n      'focus',\n      this.onBrowserTabActive,\n      windowListenerOptions\n    )\n    window.addEventListener(\n      'beforeunload',\n      (e) => {\n        e.preventDefault();\n        console.log(this.guid + ' <-- ADIOS')\n      },\n      windowListenerOptions\n    )\n\n    const throttleResetIdleTime = () => setTimeout(this.resetIdleTime, 100);\n\n    windowIdleEvents.forEach(event => {\n      window.addEventListener(\n        event,\n        throttleResetIdleTime,\n        windowListenerOptions\n      )\n    })\n\n    documentIdleEvents.forEach(event =>\n      document.addEventListener(\n        event,\n        throttleResetIdleTime,\n        documentListenerOptions\n      )\n    )\n  }\n\n  private unregisterEventListeners = () => {\n    window.removeEventListener('blur', this.onBrowserTabInactive)\n    window.removeEventListener('focus', this.onBrowserTabActive)\n    windowIdleEvents.forEach(event =>\n      window.removeEventListener(event, this.resetIdleTime)\n    )\n\n    documentIdleEvents.forEach(event =>\n      document.removeEventListener(event, this.resetIdleTime)\n    )\n  }\n\n  private checkCallbacksOnInterval = () => {\n    this.checkCallbackIntervalId = window.setInterval(() => {\n      this.onTimePassed()\n    }, this.checkCallbacksIntervalMs)\n  }\n\n  private getCurrentGuid = () => {\n    return localStorage.getItem(this.guidKey);\n  }\n\n  private setCurrentGuid() {\n    localStorage.setItem(this.guidKey, this.guid);\n  }\n\n  public static getActiveTimesObject(key: string, cb?: Function) {\n    let activeTime = localStorage.getItem('browserTimeActiveObject-' + key);\n    if (cb) {\n      return cb(activeTime);\n    } else {\n      return activeTime;\n    }\n  }\n\n  public static getIdleTimesObject(key: string, cb?: Function) {\n    let idleTime = localStorage.getItem('browserTimeIdleObject-' + key);\n    if (cb) {\n      return cb(idleTime);\n    } else {\n      return idleTime;\n    }\n  }\n\n  public startTimer = () => {\n    if (!this.isRunning() && this.guid == this.getCurrentGuid()) {\n      this.running = true\n    }\n    if (!this.checkCallbackIntervalId) {\n      this.checkCallbacksOnInterval()\n    }\n\n    const last = this.times[this.times.length - 1]\n    if (last && last.stop === null) {\n      return\n    }\n\n    if (this.timesIdle.length > 1) {\n      if (performance.now() < this.timesIdle[this.timesIdle.length - 1].start) {\n        this.timesIdle[this.timesIdle.length - 1].stop = this.timesIdle[this.timesIdle.length - 1].start;\n      } else {\n        this.timesIdle[this.timesIdle.length - 1].stop = performance.now();\n      }\n      this.storageTimesObject(this.localKey, this.timesIdle, false);\n    }\n\n    this.times.push({\n      start: performance.now(),\n      stop: null\n    });\n\n    this.storageTimesObject(this.localKey, this.times, true);\n  }\n\n  public stopTimer = (stopTimeActive: boolean = true) => {\n    if (!this.times.length) {\n      return;\n    }\n    this.running = false;\n\n    const last = this.timesIdle[this.timesIdle.length - 1]\n    if (last && last.stop === null) {\n      return\n    }\n\n    if (stopTimeActive) {\n      this.times[this.times.length - 1].stop = performance.now();\n      this.storageTimesObject(this.localKey, this.times, true);\n    }\n    this.timesIdle.push({\n      start: performance.now(),\n      stop: null\n    });\n    this.storageTimesObject(this.localKey, this.timesIdle, false);\n\n  }\n\n  public addTimeIntervalEllapsedCallback = (\n    timeIntervalEllapsedCallback: TimeIntervalEllapsedCallbackData\n  ) => {\n    this.timeIntervalEllapsedCallbacks.push(timeIntervalEllapsedCallback)\n  }\n\n  public addAbsoluteTimeEllapsedCallback = (\n    absoluteTimeEllapsedCallback: AbsoluteTimeEllapsedCallbackData\n  ) => {\n    this.absoluteTimeEllapsedCallbacks.push(absoluteTimeEllapsedCallback)\n  }\n\n  public addBrowserTabInactiveCallback = (\n    browserTabInactiveCallback: BasicCallback\n  ) => {\n    this.browserTabInactiveCallbacks.push(browserTabInactiveCallback)\n  }\n\n  public addBrowserTabActiveCallback = (\n    browserTabActiveCallback: BasicCallback\n  ) => {\n    this.browserTabActiveCallbacks.push(browserTabActiveCallback)\n  }\n\n  public getTimeInMilliseconds = (): number => {\n    return this.times.reduce((acc, current) => {\n      if (current.stop) {\n        acc = acc + (current.stop - current.start)\n      } else {\n        acc = acc + (performance.now() - current.start)\n      }\n      return acc\n    }, 0)\n  }\n\n  public getTimeInMillisecondsOf = (times: any): number => {\n    if (times == null) {\n      times = '[{}]';\n    }\n    return JSON.parse(times).reduce((acc: any, current: any) => {\n      if (current.stop) {\n        acc = acc + (current.stop - current.start)\n      } else {\n        acc = acc + (performance.now() - current.start)\n      }\n      return acc\n    }, 0)\n  }\n\n  public getIdleTimeInMilliseconds = (): number => {\n    return this.timesIdle.reduce((acc, current) => {\n      if (current.stop) {\n        acc = acc + (current.stop - current.start)\n      } else {\n        acc = acc + (performance.now() - current.start)\n      }\n      return acc\n    }, 0)\n  }\n\n  public isRunning = () => {\n    return this.running\n  }\n\n  public reset = () => {\n    this.times = []\n  }\n\n  public destroy = () => {\n    this.unregisterEventListeners()\n    if (this.checkCallbackIntervalId) {\n      window.clearInterval(this.checkCallbackIntervalId)\n    }\n  }\n\n  public mark(key: string) {\n    if (!this.marks[key]) {\n      this.marks[key] = []\n    }\n    this.marks[key].push({ time: this.getTimeInMillisecondsOf(BrowserInteractionTime.getActiveTimesObject(this.localKey)) })\n  }\n\n  public getMarks(name: string) {\n    if (this.marks[name].length < 1) {\n      return\n    }\n\n    return this.marks[name]\n  }\n\n  public measure(name: string, startMarkName: string, endMarkName: string) {\n    const startMarks = this.marks[startMarkName]\n    const startMark = startMarks[startMarks.length - 1]\n    const endMarks = this.marks[endMarkName]\n    const endMark = endMarks[endMarks.length - 1]\n\n    if (!this.measures[name]) {\n      this.measures[name] = []\n    }\n\n    this.measures[name].push({\n      name,\n      startTime: startMark.time,\n      duration: endMark.time - startMark.time\n    })\n  }\n\n  public getMeasures(name: string) {\n    if (!this.measures[name] && this.measures[name].length < 1) {\n      return\n    }\n\n    return this.measures[name]\n  }\n\n  public static storageTime = (key: string) => (time: any, active: any) => {\n    if (active) {\n      localStorage.setItem('browserTimeActive-' + key, (time).toString());\n    } else if (!active) {\n      localStorage.setItem('browserTimeIdle-' + key, (time).toString());\n    }\n  };\n\n  public storageTimesObject = (key: string, times: any, active: boolean = true) => {\n    if (active) {\n      localStorage.setItem('browserTimeActiveObject-' + key, JSON.stringify(times));\n    } else if (!active) {\n      localStorage.setItem('browserTimeIdleObject-' + key, JSON.stringify(times));\n    }\n  };\n\n  public static initTimer(time: string) {\n    return time == null ? [] : [{\n      start: performance.now(),\n      stop: (parseFloat(time))\n    }];\n  }\n\n  public static getActiveTime = (key: string, cb?: Function) => {\n    let activeTime = localStorage.getItem('browserTimeActive-' + key);\n    if (cb) {\n      return cb(activeTime);\n    } else {\n      return activeTime;\n    }\n  }\n\n  public static getIdleTime = (key: string, cb?: Function) => {\n    let idleTime = localStorage.getItem('browserTimeIdle-' + key);\n    if (cb) {\n      return cb(idleTime);\n    } else {\n      return idleTime;\n    }\n  }\n}\n"],"names":[],"mappings":"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"}